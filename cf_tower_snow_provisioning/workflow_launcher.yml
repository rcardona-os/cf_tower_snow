---
- hosts: localhost #ansible-tower
  connection: local

  vars:
    ansible_tower_ip: 10.154.0.2
    job_template_id: 9
    tower_user: admin
    tower_pass: r3dh4t1!


  tasks:
    - name: Job Template to launch a Workflow Job Template (as a workaround, waiting for CloudForms 4.5)
      uri:
        url: https://{{ ansible_tower_ip }}/api/v2/workflow_job_templates/{{ job_template_id }}/launch/
        method: POST
        user: "{{ tower_user }}"
        password: "{{ tower_pass }}"
        body_format: json
        validate_certs: False
        headers_Content-Type: "application/json"
        status_code: 200, 201
        force_basic_auth: true
        body:
          extra_vars: "launched_from: CloudForms Mijo\nuser: admin\npassword: r3dh4t1!"


  #roles:
  #- workflow_launcher